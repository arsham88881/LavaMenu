@*@model LavaMenu.Application.Common.RequestDTO.AddCateguryRequestDTO*@

@*@using LavaMenu.Application.Common.ResultDTO;*@

@{
    Layout = "_LayoutAdmin";
    //var result = ViewData["addCateguryResult"] as GlobalResultDTO;


}

<div class="card bg-warning" style="width: 24rem;">
    <h5 class="card-header  text-white custom-glass">
        افزون دسته بندی جدید
    </h5>
    <form id="addCateguryForm" enctype="multipart/form-data">
        <div class="card-body custom-direction ">

            <div class="mb-3 text-black">
                <label for="Image" class="form-label">
                    ابتدا وارد سایت زیر بشین و عکس خود را فشرده سازی کنید سپس
                    بارگزاری کنید<br />
                    <a href="https://imagecompressor.com/" target="_blank">click this</a>
                </label>
                <input class="form-control" type="file" id="Image" accept="image/*" />
                <label class="mt-1">Default file input (PNG,JPEG)</label>
            </div>
            <div class="form-floating mb-3 text-black">
                <input type="text"
                       class="form-control"
                       id="Name"
                       placeholder="عنوان"
                       required />
                <label for="Name">عنوان</label>
            </div>
            <button type="submit"
                    class="btn btn-danger">
                ذخیره
            </button>
        </div>
    </form>
</div>
<!-- modal show result  -->
@*@await Component.InvokeAsync("ShowGlobalResult", result);*@

<script>
    const addCateguryForm = document.querySelector('#addCateguryForm');
    const ImgAddCategury = document.querySelector('#Image');
    const NameAddCategury = document.querySelector('#Name');

    addCateguryForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        var formdata = new FormData();
        let addcateguryData = {
            Name: NameAddCategury.value,
            ImageAlt: NameAddCategury.value
        }
        formdata.append("Image", ImgAddCategury.files[0]);
        formdata.append("otherdata",JSON.stringify(addcateguryData));

        //var request = { Image: ImgAddCategury.Value, Name: NameAddCategury.Value };
        const url = "/categury/index";
        var result = await( await fetch(url, {
            method: "post",
            body: formdata
        })).json();
        console.log(result);
    })
</script>